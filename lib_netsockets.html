<html>
<head>
<title>lib_netsockets</title>
<link rel="stylesheet" type="text/css" href="star.css" />
</head>
<body>
<h1>lib_netsockets</h1>
Pedro Vicente
<hr>
lib_netsockets is a set of C++ classes that use POSIX/Winsock sockets with implementation of TCP client/server using JSON messages, and HTTP, FTP clients.
The following steps shown an example of a client/server exchange using JSON.
<h1>TCP client/server exchange using JSON</h1>
A TCP server listening on port 2000 can be made with
<pre class="cpp">
<code>
tcp_server_t server(2000);
while (true)
{
  socket_t socket = server.accept_client();
  handle_client(socket);
  socket.close();
}
server.close();
</code>
</pre>

A TCP client that connects to the server listening at address "127.0.0.1" on port 2000 is made with
<pre class="cpp">
<code>
tcp_client_t client("127.0.0.1", 2000);
</code>
</pre>

JSON message requests are made using the jansson JSON library. An example that defines a JSON object defined as 

<pre class="json">
<code>
{"start_year": 2016}
</code>
</pre>
is
<pre class="cpp">
<code>
json_t *request = json_object();
json_object_set_new(request, "start_year", json_integer(2016));
</code>
</pre>
The connection and message transmission to the server is made with
<pre class="cpp">
<code>
client.open();
client.write(request);
</code>
</pre>


<h2>References</h2>
<ul>
<li>
[RFC2616] Hypertext Transfer Protocol -- HTTP/1.1. https://tools.ietf.org/html/rfc2616
</li>
</ul>



</body>
</html>